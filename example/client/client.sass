rhtml,
body
    width: 100%
    height: 100%
    margin: 0
    padding: 0
    font-family: 'Roboto', sans-serif
    background-color: orange

$height-chat-square: 700px
$width-chat-square: 70%
$height-sender: 30px

$contacts-width: 20%

$marg-top: 30px
$marg-sides: 5%
#contacts
  width: $contacts-width
  height: $height-chat-square
  background-color: rgb(250,220,210)
  float: right
  margin-right: $marg-sides - 1

  .contact


@mixin modal

  &:before
    content: ""
    display: block
    position: fixed
    top:    0
    left:   0
    bottom: 0
    right:  0
    z-index: -10

    background-color: rgba(0,0,0,0.5)

  & > *
    z-index: 20

  &:after
    content: ""
    position: absolute
    top:    0
    bottom: 0
    left:   0
    right:  0
    z-index:  -5

  position: fixed


#registration

  display: none

  @include modal

  text-align: center

  width: 75%
  height: 300px

  top: 50%
  left: 50%

  margin-top: -150px
  margin-left: -37.5%

  &:after
    background-color: gray

#registration__nickname
  text-align: center
  width: 80%
  margin: 0 auto


#registration__connect
  width: 30%
  margin: 20px auto 0


#sender
  $button-width: 60px;
  $width-button-border: 2px
  $width-message-border: 2px
  height: $height-sender;
  width: $width-chat-square;
  margin-left: calc(5% + 5px)
  position: absolute

  #message-input
    display: inline-block
    width: calc(100% - #{$button-width} - #{$width-button-border} * 2 - #{$width-message-border} * 2)
    border: $width-button-border rgb(0,0,30)
    height: 100%
    background-color: lightyellow

  #send-button
    cursor: pointer
    width: $button-width
    border: $width-button-border rgb(120,60,0)
    display: inline-block
    background-color: rgb(170,130,10)
    box-shadow: inset -1px -1px 3px black;
    height: 100%
    font-size: 16px
    font-weight: bold
    color: yellow
    text-shadow: 1px 1px grey
    &:active
      background-color: rgb(200,150,10)
      box-shadow: inset 2px 2px 3px gray;
      text-shadow: none


#chat
  display: absolute
  width: $width-chat-square
  margin-left: $marg-sides
  margin-top: $marg-top
  border: 4px solid black
  box-shadow: 1px 1px 5px black
  height: $height-chat-square - $height-sender
  background-color: white

=box-before($content, $color, $bg-color)
    &::before
      display: inline-block
      content: $content
      padding: 4px 10px
      margin: 2px 5px
      color: $color
      background-color: $bg-color
      width: 50px
      text-align: center

.message-line
  width: 100%
  border-bottom: 1px solid rgba(0,0,30,0.3)
  font: 20px black

.message-line--server
  background-color: grey
  font: 18px Arial
  color: rgb(240,230,240)
  +box-before("server", #444, #aaa)

.message-line--info
  background-color: rgb(50,110,210)
  font: 18px Arial
  color: white
  +box-before("Info", #227, #8be)

.message-line--message
  &::before
    content: attr(data-user)":"
    font-size: 25px
    display: inline-block
    margin: 1px 4px;
